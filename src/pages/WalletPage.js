import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import { useState } from 'react';
import { useGameStore } from '../store/gameStore';
import { Send, Copy, Zap, TrendingUp } from 'lucide-react';
import { motion } from 'framer-motion';
export function WalletPage() {
    const { wallet, sendCrypto, loading } = useGameStore();
    const [tab, setTab] = useState('balance');
    const [toAddress, setToAddress] = useState('');
    const [amount, setAmount] = useState('');
    const [success, setSuccess] = useState(false);
    const handleSendCrypto = async (e) => {
        e.preventDefault();
        if (!toAddress || !amount)
            return;
        try {
            await sendCrypto(toAddress, parseFloat(amount));
            setToAddress('');
            setAmount('');
            setSuccess(true);
            setTimeout(() => setSuccess(false), 3000);
        }
        catch (error) {
            console.error('Transaction failed:', error);
        }
    };
    const mockTransactions = [
        { id: 1, type: 'received', amount: 50, from: 'Mission Reward', date: '2025-02-02', status: 'confirmed' },
        { id: 2, type: 'sent', amount: 10, to: 'Civic Dev Fund', date: '2025-02-01', status: 'confirmed' },
        { id: 3, type: 'received', amount: 100, from: 'Environmental Cleanup', date: '2025-01-31', status: 'confirmed' },
    ];
    return (_jsx("div", { className: "min-h-screen bg-gradient-dark", children: _jsxs("div", { className: "max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-12", children: [_jsx("h1", { className: "text-4xl font-bold text-white mb-2", children: "Wallet" }), _jsx("p", { className: "text-dark-300 mb-8", children: "Manage your CIVIC tokens and transactions" }), _jsxs(motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, className: "bg-gradient-civic rounded-2xl p-8 mb-8 text-white shadow-2xl", children: [_jsx("p", { className: "text-civic-100 opacity-90 mb-2", children: "Total Balance" }), _jsxs("h2", { className: "text-5xl font-bold mb-6", children: [wallet?.balance.toFixed(2) || '0', " CIVIC"] }), _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [_jsxs("div", { children: [_jsx("p", { className: "text-sm opacity-90 mb-1", children: "Wallet Address" }), _jsxs("div", { className: "flex items-center gap-2 bg-white/10 rounded-lg p-3", children: [_jsx("code", { className: "text-sm flex-1 truncate", children: wallet?.address }), _jsx("button", { className: "hover:opacity-80 transition", children: _jsx(Copy, { className: "w-4 h-4" }) })] })] }), _jsxs("div", { children: [_jsx("p", { className: "text-sm opacity-90 mb-1", children: "Pending Rewards" }), _jsxs("p", { className: "text-2xl font-semibold", children: [wallet?.pendingBalance.toFixed(2) || '0', " CIVIC"] })] })] })] }), _jsx("div", { className: "flex gap-4 mb-8 border-b border-dark-700", children: ['balance', 'send', 'history'].map((t) => (_jsxs("button", { onClick: () => setTab(t), className: `pb-4 font-semibold transition ${tab === t
                            ? 'text-civic-400 border-b-2 border-civic-500'
                            : 'text-dark-300 hover:text-white'}`, children: [t === 'balance' && 'ðŸ’° Balance', t === 'send' && 'ðŸ“¤ Send', t === 'history' && 'ðŸ“Š History'] }, t))) }), tab === 'balance' && (_jsxs(motion.div, { initial: { opacity: 0 }, animate: { opacity: 1 }, className: "grid grid-cols-1 md:grid-cols-3 gap-6", children: [_jsxs("div", { className: "bg-dark-800 border border-dark-700 rounded-xl p-6", children: [_jsxs("div", { className: "flex items-center justify-between mb-4", children: [_jsx("span", { className: "text-dark-300", children: "Available" }), _jsx(Zap, { className: "w-5 h-5 text-yellow-400" })] }), _jsx("p", { className: "text-3xl font-bold text-white", children: wallet?.balance.toFixed(2) }), _jsx("p", { className: "text-dark-400 text-sm mt-2", children: "Ready to use" })] }), _jsxs("div", { className: "bg-dark-800 border border-dark-700 rounded-xl p-6", children: [_jsxs("div", { className: "flex items-center justify-between mb-4", children: [_jsx("span", { className: "text-dark-300", children: "Pending" }), _jsx(TrendingUp, { className: "w-5 h-5 text-civic-400" })] }), _jsx("p", { className: "text-3xl font-bold text-civic-400", children: wallet?.pendingBalance.toFixed(2) }), _jsx("p", { className: "text-dark-400 text-sm mt-2", children: "Awaiting confirmation" })] }), _jsxs("div", { className: "bg-dark-800 border border-dark-700 rounded-xl p-6", children: [_jsx("div", { className: "flex items-center justify-between mb-4", children: _jsx("span", { className: "text-dark-300", children: "Network" }) }), _jsx("p", { className: "text-3xl font-bold text-green-400", children: "Testnet" }), _jsx("p", { className: "text-dark-400 text-sm mt-2", children: "Demo mode active" })] })] })), tab === 'send' && (_jsx(motion.div, { initial: { opacity: 0 }, animate: { opacity: 1 }, children: _jsxs("div", { className: "bg-dark-800 border border-dark-700 rounded-xl p-8 max-w-md", children: [success && (_jsx(motion.div, { initial: { opacity: 0, y: -10 }, animate: { opacity: 1, y: 0 }, className: "mb-6 p-4 bg-green-500/10 border border-green-500/50 rounded-lg text-green-200", children: "\u2713 Transaction submitted successfully!" })), _jsxs("form", { onSubmit: handleSendCrypto, className: "space-y-4", children: [_jsxs("div", { children: [_jsx("label", { className: "block text-sm font-medium text-dark-200 mb-2", children: "Recipient Address" }), _jsx("input", { type: "text", value: toAddress, onChange: (e) => setToAddress(e.target.value), placeholder: "0x...", className: "w-full px-4 py-2.5 bg-dark-700 border border-dark-600 rounded-lg focus:border-civic-500 focus:outline-none focus:ring-2 focus:ring-civic-500/20 transition text-white placeholder-dark-400" })] }), _jsxs("div", { children: [_jsx("label", { className: "block text-sm font-medium text-dark-200 mb-2", children: "Amount (CIVIC)" }), _jsx("input", { type: "number", step: "0.01", value: amount, onChange: (e) => setAmount(e.target.value), placeholder: "0.00", max: wallet?.balance, className: "w-full px-4 py-2.5 bg-dark-700 border border-dark-600 rounded-lg focus:border-civic-500 focus:outline-none focus:ring-2 focus:ring-civic-500/20 transition text-white placeholder-dark-400" }), _jsxs("p", { className: "text-xs text-dark-400 mt-2", children: ["Available: ", wallet?.balance.toFixed(2), " CIVIC"] })] }), _jsx("button", { type: "submit", disabled: loading, className: "w-full mt-6 py-3 bg-gradient-civic hover:opacity-90 disabled:opacity-50 text-white font-semibold rounded-lg transition flex items-center justify-center gap-2", children: loading ? (_jsxs(_Fragment, { children: [_jsx("div", { className: "w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin" }), "Processing..."] })) : (_jsxs(_Fragment, { children: [_jsx(Send, { className: "w-4 h-4" }), " Send CIVIC"] })) })] })] }) })), tab === 'history' && (_jsx(motion.div, { initial: { opacity: 0 }, animate: { opacity: 1 }, children: _jsx("div", { className: "space-y-3", children: mockTransactions.map((tx, index) => (_jsxs(motion.div, { initial: { opacity: 0, x: -20 }, animate: { opacity: 1, x: 0 }, transition: { delay: index * 0.1 }, className: "bg-dark-800 border border-dark-700 rounded-xl p-4 flex items-center justify-between", children: [_jsxs("div", { className: "flex items-center gap-4", children: [_jsx("div", { className: `p-3 rounded-lg ${tx.type === 'received' ? 'bg-green-500/10' : 'bg-red-500/10'}`, children: tx.type === 'received' ? 'ðŸ“¥' : 'ðŸ“¤' }), _jsxs("div", { children: [_jsxs("p", { className: "font-semibold text-white", children: [tx.type === 'received' ? 'Received from' : 'Sent to', " ", tx.type === 'received' ? tx.from : tx.to] }), _jsx("p", { className: "text-dark-400 text-sm", children: tx.date })] })] }), _jsxs("div", { className: "text-right", children: [_jsxs("p", { className: `text-lg font-bold ${tx.type === 'received' ? 'text-green-400' : 'text-red-400'}`, children: [tx.type === 'received' ? '+' : '-', tx.amount, " CIVIC"] }), _jsx("p", { className: "text-dark-400 text-xs capitalize", children: tx.status })] })] }, tx.id))) }) }))] }) }));
}
