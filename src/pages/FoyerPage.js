import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { motion } from 'framer-motion';
import { ArrowLeft, Newspaper, BookOpen, ShoppingBag, Users, Award, MapPin, Zap, Video, Crosshair } from 'lucide-react';
import { useGameStore } from '../store/gameStore';
export function FoyerPage() {
    const navigate = useNavigate();
    const { user, wallet, marketplaceBuy, payoutGambling, treasuryBalance, marketplaceHistory, sellers, createProposal, voteProposal, proposals, distributeUBI, miningFacilities, totalCryptoMined, miningActive, startMining, stopMining, totalMiningHashRate, totalTreasuryFromMining, jobs, selectedJob, currentJobStatus, selectJob, acceptJob, verifyJobCompletion, completeJob, currentJobProgress } = useGameStore();
    const [selectedZone, setSelectedZone] = useState(null);
    const [verificationStep, setVerificationStep] = useState(0);
    const [showJobVideo, setShowJobVideo] = useState(false);
    const zones = [
        {
            id: 'commerce',
            name: 'Marketplace',
            description: 'ðŸ›ï¸ Real Commerce, Real Ownership',
            icon: 'ðŸ›’',
            details: 'Trade digital wearables, merch, and resellables. NFT stat cards and rep-based unlockables. 1% microtax on all transactions = UBI + mission rewards',
        },
        {
            id: 'schoolhouse',
            name: 'Schoolhouse',
            description: 'ðŸ“š Crypto-Paid Education',
            icon: 'ðŸŽ“',
            details: 'Learn from real educators earning real crypto. Students earn credentials + DAO power. Interactive civics courses and governance training.',
        },
        {
            id: 'newsstand',
            name: 'Newsstand',
            description: 'ðŸ“° Live CivicWatch Reports',
            icon: 'ðŸ“‘',
            details: 'Stream verified, decentralized civic journalism. Real-time mission reports and community updates. UI feeds push shortform updates based on your rep.',
        },
        {
            id: 'social',
            name: 'Social Arena',
            description: 'ðŸ’¬ Community Connection',
            icon: 'ðŸ‘¥',
            details: 'VOIP-enabled squad formation, chat, and emotes. Spectate live operations. Tip players, support missions, or join causes directly in-game.',
        },
        {
            id: 'universe',
            name: 'Universe Portal',
            description: 'ðŸŒŒ Indie Developer Worlds',
            icon: 'ðŸŒ€',
            details: 'Hub for indie game developers to publish immersive worlds. Portal to community-built mini-games, quests, and experiences. Protocol-aligned experiences only.',
        },
        {
            id: 'avatar',
            name: 'Avatar Customization',
            description: 'ðŸ‘• NFT Wearables',
            icon: 'ðŸ‘—',
            details: 'Equip wearables earned via missions. Attach banners, DAO tags, skill badge layers. Real-world merch syncs with in-game gear. Your look = your rep.',
        },
    ];
    const marketplaceItems = [
        { id: 'item1', name: 'Neon Jacket (Real Brand)', price: 150.0, seller: '0xSellerA', description: 'Limited edition neon jacket from Brand X.' },
        { id: 'item2', name: 'AR Glasses', price: 299.99, seller: '0xSellerB', description: 'Augmented reality glasses with HUD.' },
        { id: 'item3', name: 'Concert Ticket - Synthwave Night', price: 45.0, seller: '0xSellerC', description: 'IRL concert ticket redeemable via voucher.' },
    ];
    const [chatMessages, setChatMessages] = useState([
        { author: 'SYSTEM', text: 'Marketplace live â€” 1% microtax funds the community treasury.', color: '#00ffcc' },
    ]);
    // Local CreateProposal form component
    function CreateProposalForm({ onCreate }) {
        const [title, setTitle] = useState('');
        const [amount, setAmount] = useState(50);
        return (_jsxs("div", { className: "mt-2", children: [_jsx("input", { value: title, onChange: (e) => setTitle(e.target.value), placeholder: "Proposal title", className: "w-full mb-2 p-2 rounded bg-dark-600 text-white text-sm" }), _jsx("input", { value: String(amount), onChange: (e) => setAmount(Number(e.target.value)), placeholder: "Amount", type: "number", className: "w-full mb-2 p-2 rounded bg-dark-600 text-white text-sm" }), _jsx("button", { onClick: () => { if (title.trim()) {
                        onCreate(title, amount);
                        setTitle('');
                    } }, className: "w-full px-3 py-2 bg-civic-500 text-white rounded", children: "Create Proposal" })] }));
    }
    return (_jsxs("div", { className: "min-h-screen bg-gradient-dark", children: [_jsx("div", { className: "bg-dark-800/50 border-b border-dark-700 sticky top-0 z-40 backdrop-blur-xl", children: _jsx("div", { className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6", children: _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { className: "flex items-center gap-4", children: [_jsx("span", { className: "text-4xl", children: "\uD83C\uDFDB\uFE0F" }), _jsxs("div", { children: [_jsx("h1", { className: "text-3xl font-bold text-white", children: "The Foyer" }), _jsx("p", { className: "text-dark-300", children: "CivicVerse Lobby City \u2014 Where Real Action Meets Digital Identity" })] })] }), _jsxs(motion.button, { whileHover: { scale: 1.05 }, whileTap: { scale: 0.95 }, onClick: () => navigate('/dashboard'), className: "flex items-center gap-2 bg-dark-700 hover:bg-dark-600 border border-dark-600 text-white font-semibold py-2 px-4 rounded-lg transition", children: [_jsx(ArrowLeft, { className: "w-5 h-5" }), "Back"] })] }) }) }), _jsxs("div", { className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12", children: [_jsx(motion.div, { initial: { opacity: 0, scale: 0.9 }, animate: { opacity: 1, scale: 1 }, transition: { duration: 0.6 }, className: "mb-12", children: _jsxs("div", { className: "relative rounded-2xl overflow-hidden bg-gradient-to-br from-civic-600 via-civic-700 to-civic-900 border-2 border-civic-400/50 p-12 shadow-2xl hover:shadow-civic-500/50 transition-shadow", style: {
                                backgroundImage: 'radial-gradient(circle at 20% 50%, rgba(14,165,233,0.15) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(14,165,233,0.1) 0%, transparent 50%)',
                            }, children: [_jsxs("div", { className: "absolute inset-0 overflow-hidden", children: [_jsx("div", { className: "absolute top-0 left-1/4 w-64 h-64 bg-civic-500/10 rounded-full blur-3xl animate-pulse" }), _jsx("div", { className: "absolute bottom-0 right-1/4 w-64 h-64 bg-civic-400/10 rounded-full blur-3xl animate-pulse animation-delay-2000" })] }), _jsxs("div", { className: "relative z-10 text-center", children: [_jsx("div", { className: "inline-block mb-6", children: _jsx(motion.div, { animate: { rotate: 360 }, transition: { duration: 20, repeat: Infinity, ease: 'linear' }, className: "text-6xl", children: "\uD83C\uDF10" }) }), _jsx("h2", { className: "text-4xl md:text-5xl font-black text-white mb-4 drop-shadow-lg", children: "Enter 3D Foyer Demo Experience" }), _jsx("p", { className: "text-xl text-white/90 mb-8 max-w-2xl mx-auto drop-shadow-md", children: "Step into an immersive 3D multiplayer city. Avatar carryover \u2022 Real-time interactions \u2022 Decentralized governance" }), _jsxs(motion.button, { onClick: () => navigate('/mmorpg'), whileHover: { scale: 1.08 }, whileTap: { scale: 0.95 }, className: "inline-flex items-center gap-3 bg-white text-civic-700 font-black text-lg px-12 py-4 rounded-xl shadow-xl hover:shadow-2xl transition-all cursor-pointer group", children: [_jsx("span", { children: "\uD83D\uDE80 Launch 3D Foyer" }), _jsx(motion.span, { animate: { x: [0, 5, 0] }, transition: { duration: 1, repeat: Infinity }, className: "group-hover:translate-x-2 transition-transform", children: "\u2192" })] }), _jsxs(motion.button, { onClick: () => navigate('/fpsgame'), whileHover: { scale: 1.08 }, whileTap: { scale: 0.95 }, className: "inline-flex items-center gap-3 bg-gradient-to-r from-red-600 to-orange-600 text-white font-black text-lg px-12 py-4 rounded-xl shadow-xl hover:shadow-2xl transition-all cursor-pointer group ml-4", children: [_jsx("span", { children: "\u2694\uFE0F DUNGEON ARENA - P2P BETTING" }), _jsx(motion.span, { animate: { x: [0, 5, 0] }, transition: { duration: 1, repeat: Infinity }, className: "group-hover:translate-x-2 transition-transform", children: "\u2192" })] }), _jsx("p", { className: "text-white/70 text-sm mt-6", children: "Unreal Engine 5 \u2022 Full Avatar Sync \u2022 Live Trading \u2022 DAO Governance \u2022 FPS Dungeon Combat Arena" })] })] }) }), _jsxs(motion.div, { initial: { opacity: 0, y: 10 }, animate: { opacity: 1, y: 0 }, className: "bg-dark-800 border border-dark-700 rounded-xl p-6 mb-12", children: [_jsx("h3", { className: "text-xl font-bold text-white mb-3", children: "Community Treasury" }), _jsxs("div", { className: "flex items-center justify-between mb-4", children: [_jsx("div", { className: "text-sm text-dark-300", children: "Treasury Balance" }), _jsxs("div", { className: "text-yellow-400 font-mono text-lg", children: [(treasuryBalance || 0).toFixed(2), " CIVIC"] })] }), _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [_jsxs("div", { className: "bg-dark-700 p-4 rounded", children: [_jsx("div", { className: "text-sm text-white font-semibold mb-2", children: "Proposals" }), _jsx("div", { className: "space-y-2 max-h-52 overflow-auto", children: (proposals || []).map((p) => (_jsxs("div", { className: "p-2 border border-dark-600 rounded flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("div", { className: "text-sm text-white font-bold", children: p.title }), _jsxs("div", { className: "text-xs text-dark-300", children: ["Amount: ", p.amount.toFixed(2), " CIVIC"] })] }), _jsxs("div", { className: "text-right", children: [_jsxs("div", { className: "text-xs text-dark-300", children: ["For: ", p.votesFor, " \u2022 Against: ", p.votesAgainst] }), _jsxs("div", { className: "flex gap-2 mt-2", children: [_jsx("button", { onClick: () => voteProposal && voteProposal(p.id, true), className: "px-2 py-1 bg-green-600 text-white rounded text-xs", children: "Vote For" }), _jsx("button", { onClick: () => voteProposal && voteProposal(p.id, false), className: "px-2 py-1 bg-red-600 text-white rounded text-xs", children: "Vote Against" })] })] })] }, p.id))) }), _jsx("div", { className: "mt-3", children: _jsx(CreateProposalForm, { onCreate: (title, amount) => createProposal && createProposal(title, amount) }) })] }), _jsxs("div", { className: "bg-dark-700 p-4 rounded", children: [_jsx("div", { className: "text-sm text-white font-semibold mb-2", children: "Marketplace History" }), _jsx("div", { className: "max-h-52 overflow-auto space-y-2 text-sm text-dark-300", children: (marketplaceHistory || []).slice().reverse().map((h) => (_jsxs("div", { className: "border border-dark-600 p-2 rounded", children: [_jsxs("div", { children: [_jsx("span", { className: "text-white font-mono", children: h.buyer || 'anon' }), " bought from ", _jsx("span", { className: "text-white font-mono", children: h.seller })] }), _jsxs("div", { className: "text-xs", children: [h.price.toFixed(2), " CIVIC \u2022 ", new Date(h.timestamp).toLocaleString()] })] }, h.id))) }), _jsxs("div", { className: "mt-4", children: [_jsx("div", { className: "text-xs text-dark-300 mb-2", children: "Distribute UBI from treasury" }), _jsxs("div", { className: "flex gap-2", children: [_jsx("button", { onClick: () => distributeUBI && distributeUBI(50), className: "px-3 py-2 bg-civic-500 text-white rounded", children: "Distribute 50" }), _jsx("button", { onClick: () => distributeUBI && distributeUBI(100), className: "px-3 py-2 bg-civic-500 text-white rounded", children: "Distribute 100" })] })] })] })] })] }), _jsxs(motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { delay: 0.2 }, className: "bg-dark-800 border border-dark-700 rounded-xl p-8 mb-12", children: [_jsxs("div", { className: "flex items-center justify-between mb-6", children: [_jsxs("div", { children: [_jsx("h2", { className: "text-3xl font-bold text-white flex items-center gap-2", children: "\u26CF\uFE0F Solar Mining Network" }), _jsx("p", { className: "text-dark-300 mt-2", children: "5 facilities \u00D7 5 cryptos \u2022 Real-time hash rate & treasury contribution" })] }), _jsxs("div", { className: "flex gap-2", children: [_jsx("button", { onClick: () => startMining && startMining(), disabled: miningActive, className: `px-4 py-2 rounded font-semibold transition ${miningActive ? 'bg-green-600 text-white' : 'bg-civic-500 hover:bg-civic-600 text-white'}`, children: miningActive ? 'âš¡ Mining Active' : 'Start Mining' }), _jsx("button", { onClick: () => stopMining && stopMining(), disabled: !miningActive, className: `px-4 py-2 rounded font-semibold transition ${!miningActive ? 'bg-dark-600 text-dark-400' : 'bg-red-600 hover:bg-red-700 text-white'}`, children: "Stop Mining" })] })] }), _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4 mb-6", children: [_jsxs("div", { className: "bg-dark-700 rounded-lg p-4 border border-dark-600", children: [_jsxs("div", { className: "text-sm text-dark-400 mb-2 flex items-center gap-2", children: [_jsx(Zap, { className: "w-4 h-4" }), " Total Hash Rate"] }), _jsxs("div", { className: "text-2xl font-bold text-green-400 font-mono", children: [((totalMiningHashRate || 0) / 1000).toFixed(1), "K"] }), _jsx("div", { className: "text-xs text-dark-500 mt-1", children: "hashes/sec" })] }), _jsxs("div", { className: "bg-dark-700 rounded-lg p-4 border border-dark-600", children: [_jsx("div", { className: "text-sm text-dark-400 mb-2", children: "Treasury from Mining" }), _jsx("div", { className: "text-2xl font-bold text-cyan-400 font-mono", children: (totalTreasuryFromMining || 0).toFixed(2) }), _jsx("div", { className: "text-xs text-dark-500 mt-1", children: "CIVIC accumulated" })] }), _jsxs("div", { className: "bg-dark-700 rounded-lg p-4 border border-dark-600", children: [_jsx("div", { className: "text-sm text-dark-400 mb-2", children: "Total Community Treasury" }), _jsx("div", { className: "text-2xl font-bold text-yellow-400 font-mono", children: (treasuryBalance || 0).toFixed(2) }), _jsx("div", { className: "text-xs text-dark-500 mt-1", children: "CIVIC" })] })] }), _jsxs("div", { className: "mb-6", children: [_jsx("h3", { className: "text-lg font-semibold text-white mb-4", children: "Crypto Accumulation (100 units max per facility)" }), _jsx("div", { className: "grid grid-cols-1 md:grid-cols-5 gap-4", children: ['BTC', 'ETH', 'Monero', 'Kaspa', 'CIVIC'].map((crypto) => (_jsxs("div", { className: "bg-dark-700 rounded-lg p-4 border border-dark-600", children: [_jsx("div", { className: "text-sm text-dark-400 mb-2 font-semibold", children: crypto }), _jsx("div", { className: "text-2xl font-bold text-civic-400 font-mono", children: (totalCryptoMined?.[crypto] || 0).toFixed(2) }), _jsx("div", { className: "text-xs text-dark-500 mt-1", children: "/ 100 units" }), _jsx("div", { className: "mt-3 w-full bg-dark-600 rounded-full h-2 overflow-hidden", children: _jsx("div", { className: "bg-gradient-to-r from-civic-500 to-civic-400 h-full transition-all duration-500", style: { width: `${Math.min(100, (totalCryptoMined?.[crypto] || 0))}%` } }) })] }, crypto))) })] }), _jsxs("div", { className: "mb-6", children: [_jsx("h3", { className: "text-lg font-semibold text-white mb-4", children: "\u2699\uFE0F Active Mining Facilities" }), _jsx("div", { className: "grid grid-cols-1 lg:grid-cols-5 gap-4", children: (miningFacilities || []).map((facility) => (_jsxs("div", { className: "bg-dark-700 rounded-lg p-4 border border-dark-600 hover:border-civic-500/50 transition", children: [_jsxs("div", { className: "flex items-start justify-between mb-3", children: [_jsxs("div", { children: [_jsx("div", { className: "text-white font-semibold text-sm", children: facility.name }), _jsxs("div", { className: "text-xs text-dark-400 mt-1", children: ["\uD83D\uDCCD ", facility.location] })] }), _jsx("span", { className: `text-xs px-2 py-1 rounded ${facility.active ? 'bg-green-900/50 text-green-300' : 'bg-dark-600 text-dark-400'}`, children: facility.active ? 'âœ“' : 'â—‹' })] }), _jsxs("div", { className: "space-y-2 text-xs", children: [_jsxs("div", { className: "flex justify-between", children: [_jsx("span", { className: "text-dark-400", children: "Crypto:" }), _jsx("span", { className: "text-civic-400 font-semibold", children: facility.cryptoType })] }), _jsxs("div", { className: "flex justify-between", children: [_jsx("span", { className: "text-dark-400", children: "Solar:" }), _jsxs("span", { className: "text-yellow-400", children: [facility.solarPower, "%"] })] }), _jsxs("div", { className: "flex justify-between", children: [_jsx("span", { className: "text-dark-400", children: "Hash/sec:" }), _jsxs("span", { className: "text-green-400 font-mono", children: [((facility.hashRate || 0) / 1000).toFixed(1), "K"] })] }), _jsxs("div", { className: "flex justify-between", children: [_jsx("span", { className: "text-dark-400", children: "Mined:" }), _jsxs("span", { className: "text-cyan-400 font-mono", children: [facility.totalMined.toFixed(2), "/100"] })] })] }), _jsx("div", { className: "mt-3 w-full bg-dark-600 rounded-full h-1.5 overflow-hidden", children: _jsx("div", { className: "bg-gradient-to-r from-green-500 to-cyan-500 h-full transition-all duration-500", style: { width: `${Math.min(100, facility.totalMined)}%` } }) })] }, facility.id))) })] }), _jsx("div", { className: "p-4 bg-civic-900/30 border border-civic-500/30 rounded-lg", children: _jsx("p", { className: "text-civic-300 text-sm", children: "\uD83D\uDCA1 Real-time mining: 100 units per crypto per facility. Hash rate generates treasury contributions that auto-feed community pool." }) })] }), !selectedJob ? (_jsxs(motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { delay: 0.3 }, className: "bg-dark-800 border border-dark-700 rounded-xl p-8 mb-12", children: [_jsx("div", { className: "flex items-center justify-between mb-6", children: _jsxs("div", { children: [_jsx("h2", { className: "text-3xl font-bold text-white flex items-center gap-2", children: "\uD83D\uDCCB Job LoadBoard" }), _jsx("p", { className: "text-dark-300 mt-2", children: "Select a job, watch instructions, complete verification, earn CIVIC with 1% microtax" })] }) }), _jsx("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: (jobs || []).map((job) => (_jsxs(motion.div, { whileHover: { scale: 1.02 }, onClick: () => selectJob && selectJob(job.id), className: "bg-dark-700 rounded-lg p-5 border border-dark-600 hover:border-civic-500/70 cursor-pointer transition", children: [_jsxs("div", { className: "flex items-start justify-between mb-3", children: [_jsxs("div", { children: [_jsx("h3", { className: "text-white font-semibold text-lg", children: job.title }), _jsx("p", { className: "text-dark-300 text-sm mt-1", children: job.description })] }), _jsx("span", { className: `text-xs px-2 py-1 rounded whitespace-nowrap ${job.difficulty === 'easy' ? 'bg-green-900/50 text-green-300' :
                                                        job.difficulty === 'medium' ? 'bg-yellow-900/50 text-yellow-300' :
                                                            'bg-red-900/50 text-red-300'}`, children: job.difficulty })] }), _jsxs("div", { className: "flex items-center gap-4 text-xs text-dark-400 mb-4", children: [_jsxs("span", { className: "flex items-center gap-1", children: [_jsx(MapPin, { className: "w-3 h-3" }), " ", job.location] }), _jsxs("span", { children: ["\u23F1\uFE0F ", job.estimatedTime, " min"] })] }), _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { className: "text-sm", children: [_jsx("div", { className: "text-dark-400", children: "Reward" }), _jsxs("div", { className: "text-lg font-bold text-yellow-400", children: [job.reward, " CIVIC"] })] }), _jsx("button", { onClick: () => selectJob && selectJob(job.id), className: "px-4 py-2 bg-civic-500 hover:bg-civic-600 text-white rounded font-semibold text-sm transition", children: "View Details" })] })] }, job.id))) })] })) : (
                    /* Job Detail & Dispatch View */
                    _jsxs(motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { delay: 0.3 }, className: "bg-dark-800 border border-dark-700 rounded-xl p-8 mb-12", children: [_jsxs("div", { className: "flex items-center justify-between mb-6", children: [_jsx("h2", { className: "text-3xl font-bold text-white", children: selectedJob?.title }), _jsx("button", { onClick: () => selectJob && selectJob(null), className: "text-dark-400 hover:text-white transition text-2xl", children: "\u2715" })] }), currentJobStatus === 'accepting' && (_jsxs("div", { className: "space-y-6", children: [!showJobVideo && (_jsxs("div", { className: "bg-dark-700 rounded-lg p-6 border border-dark-600 text-center", children: [_jsx(Video, { className: "w-16 h-16 mx-auto text-civic-400 mb-4" }), _jsx("h3", { className: "text-xl font-semibold text-white mb-2", children: "Watch Job Instructions" }), _jsx("p", { className: "text-dark-300 mb-6", children: "Learn how to complete this job correctly and earn your reward" }), _jsx("button", { onClick: () => setShowJobVideo(true), className: "px-6 py-3 bg-civic-500 hover:bg-civic-600 text-white rounded-lg font-semibold transition", children: "\u25B6\uFE0F Play Video (1:30)" })] })), showJobVideo && (_jsxs("div", { className: "bg-dark-700 rounded-lg p-6 border border-dark-600", children: [_jsxs("div", { className: "bg-black/50 rounded-lg aspect-video mb-4 flex items-center justify-center relative overflow-hidden", children: [_jsx("div", { className: "absolute inset-0 bg-gradient-to-br from-civic-500/20 to-cyan-500/20 animate-pulse" }), _jsxs("div", { className: "relative text-center", children: [_jsx("div", { className: "text-6xl mb-4", children: "\uD83C\uDFAC" }), _jsx("p", { className: "text-white/80", children: "Job Instruction Video Playing" }), _jsx("p", { className: "text-dark-300 text-sm mt-2", children: "Duration: 1:30" })] })] }), _jsxs("p", { className: "text-dark-300 text-sm", children: ["Instructions: ", selectedJob?.verificationTasks?.join(' â†’ ') || 'Complete job tasks'] })] })), _jsxs("div", { className: "grid grid-cols-2 md:grid-cols-4 gap-4", children: [_jsxs("div", { className: "bg-dark-700 rounded-lg p-4 border border-dark-600", children: [_jsx("div", { className: "text-xs text-dark-400 mb-2", children: "Location" }), _jsx("div", { className: "text-white font-semibold", children: selectedJob?.location })] }), _jsxs("div", { className: "bg-dark-700 rounded-lg p-4 border border-dark-600", children: [_jsx("div", { className: "text-xs text-dark-400 mb-2", children: "Duration" }), _jsxs("div", { className: "text-white font-semibold", children: [selectedJob?.estimatedTime, " min"] })] }), _jsxs("div", { className: "bg-dark-700 rounded-lg p-4 border border-dark-600", children: [_jsx("div", { className: "text-xs text-dark-400 mb-2", children: "Difficulty" }), _jsx("div", { className: "text-white font-semibold capitalize", children: selectedJob?.difficulty })] }), _jsxs("div", { className: "bg-dark-700 rounded-lg p-4 border border-dark-600", children: [_jsx("div", { className: "text-xs text-dark-400 mb-2", children: "Gross Reward" }), _jsxs("div", { className: "text-yellow-400 font-semibold", children: [selectedJob?.reward, " CIVIC"] })] })] }), _jsx("button", { onClick: () => acceptJob && acceptJob(selectedJob?.id || ''), className: "w-full px-6 py-4 bg-gradient-to-r from-civic-600 to-civic-500 hover:from-civic-700 hover:to-civic-600 text-white rounded-lg font-bold text-lg transition", children: "\uD83C\uDFAF Accept Job & Get Dispatched" })] })), currentJobStatus === 'dispatched' && (_jsxs("div", { className: "space-y-6", children: [_jsxs("div", { className: "bg-dark-700 rounded-lg p-6 border border-dark-600", children: [_jsx("h3", { className: "text-xl font-semibold text-white mb-4", children: "\uD83D\uDCCD Job Location" }), _jsxs("div", { className: "bg-black/50 rounded-lg h-64 mb-4 relative flex items-center justify-center overflow-hidden", children: [_jsx("div", { className: "absolute inset-0 bg-gradient-to-br from-cyan-500/10 to-civic-500/10" }), _jsxs("div", { className: "relative text-center", children: [_jsx("div", { className: "text-6xl mb-4", children: "\uD83D\uDDFA\uFE0F" }), _jsx("p", { className: "text-white/80", children: selectedJob?.location }), _jsxs("p", { className: "text-dark-300 text-sm mt-2", children: ["Navigate to destination \u2022 ~", selectedJob?.estimatedTime, " min away"] })] })] }), _jsxs("div", { className: "bg-dark-600 rounded-lg p-4 text-center", children: [_jsx("p", { className: "text-dark-300 text-sm mb-4", children: "Progress to job site" }), _jsx("div", { className: "w-full bg-dark-500 rounded-full h-2 overflow-hidden", children: _jsx(motion.div, { initial: { width: '0%' }, animate: { width: '60%' }, transition: { duration: 8 }, className: "bg-gradient-to-r from-civic-500 to-cyan-500 h-full" }) })] })] }), _jsxs("div", { className: "bg-dark-700 rounded-lg p-6 border border-dark-600", children: [_jsxs("h3", { className: "text-lg font-semibold text-white mb-4 flex items-center gap-2", children: [_jsx(Crosshair, { className: "w-5 h-5" }), " Verification Tasks"] }), _jsx("div", { className: "space-y-3", children: selectedJob?.verificationTasks?.map((task, idx) => (_jsxs("div", { className: "flex items-center gap-3 p-3 bg-dark-600 rounded-lg", children: [_jsx("input", { type: "checkbox", className: "w-5 h-5 rounded", disabled: true }), _jsx("span", { className: "text-dark-300", children: task })] }, idx))) })] }), _jsxs("div", { className: "bg-dark-700 rounded-lg p-6 border border-dark-600", children: [_jsx("h3", { className: "text-lg font-semibold text-white mb-4", children: "\uD83C\uDFAE Pok\\u00e9Stop Spin Verification" }), _jsx("p", { className: "text-dark-300 mb-4", children: "Tap the circle when it appears to verify job completion" }), _jsx("button", { onClick: () => {
                                                    setVerificationStep(1);
                                                    setTimeout(() => verifyJobCompletion && verifyJobCompletion(selectedJob?.id || '', Math.random() > 0.3), 2000);
                                                }, className: "w-full px-6 py-4 bg-green-600 hover:bg-green-700 text-white rounded-lg font-bold text-lg transition", children: verificationStep === 0 ? 'ðŸŽ¯ Start Verification' : verificationStep === 1 ? 'â³ Verifying...' : 'âœ“ Complete' })] })] })), currentJobStatus === 'completed' && (_jsx("div", { className: "space-y-6", children: _jsxs("div", { className: "bg-gradient-to-br from-green-900/50 to-cyan-900/50 rounded-lg p-8 border border-green-500/50 text-center", children: [_jsx("div", { className: "text-6xl mb-4", children: "\uD83C\uDF89" }), _jsx("h3", { className: "text-2xl font-bold text-white mb-2", children: "Job Completed!" }), _jsx("p", { className: "text-dark-200 mb-6", children: "Congratulations on completing this mission" }), _jsxs("div", { className: "bg-dark-700/50 rounded-lg p-4 mb-6", children: [_jsx("div", { className: "text-sm text-dark-400 mb-2", children: "Gross Reward" }), _jsxs("div", { className: "text-3xl font-bold text-yellow-400 mb-3", children: [selectedJob?.reward, " CIVIC"] }), _jsxs("div", { className: "flex items-center justify-around text-sm text-dark-300", children: [_jsxs("span", { children: ["Microtax (1%): ", (((selectedJob?.reward || 0) * 0.01).toFixed(2)), " CIVIC"] }), _jsxs("span", { className: "text-civic-400 font-semibold", children: ["Net: ", (((selectedJob?.reward || 0) * 0.99).toFixed(2)), " CIVIC"] })] })] }), _jsx("button", { onClick: () => {
                                                completeJob && completeJob(selectedJob?.id || '');
                                                setShowJobVideo(false);
                                                setVerificationStep(0);
                                            }, className: "w-full px-6 py-3 bg-civic-500 hover:bg-civic-600 text-white rounded-lg font-semibold transition", children: "Claim Reward & Return to Board" })] }) }))] })), _jsxs(motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, className: "bg-gradient-to-r from-civic-900/40 via-civic-800/30 to-civic-900/40 border border-civic-500/40 rounded-xl p-8 mb-12", children: [_jsx("h2", { className: "text-2xl font-bold text-white mb-4", children: "Welcome to The Foyer" }), _jsxs("p", { className: "text-dark-200 mb-4", children: ["Think ", _jsx("span", { className: "font-semibold", children: "Conton City from Xenoverse 2" }), " meets ", _jsx("span", { className: "font-semibold", children: "GTA Online" }), ", but real."] }), _jsx("p", { className: "text-dark-300", children: "The Foyer is a persistent, multiplayer lobby city where real-world civic actions shape your digital reputation, and your digital identity unlocks real-world power. Your avatar carries over from CivicWatch with full progression, stat cards, and earned NFTs." }), _jsx("div", { className: "mt-4 p-4 bg-black/20 rounded-lg border border-civic-500/30", children: _jsx("p", { className: "text-civic-300 text-sm", children: "\uD83C\uDFAE Full avatar carryover from CivicWatch \u2022 \uD83C\uDF0D Living ecosystem \u2022 \uD83D\uDD17 Decentralized identity = real power" }) })] }), _jsx(motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { delay: 0.1 }, className: "bg-dark-800 border border-dark-700 rounded-xl p-6 mb-12", children: _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { className: "flex items-center gap-4", children: [user?.avatar && (_jsx("img", { src: user.avatar, alt: user.username, className: "w-16 h-16 rounded-full border-2 border-civic-500" })), _jsxs("div", { children: [_jsx("h3", { className: "text-xl font-bold text-white", children: user?.username }), _jsxs("p", { className: "text-dark-300 text-sm", children: ["Level ", user?.level, " \u2022 Trust Score: ", user?.trustScore] })] })] }), _jsxs("div", { className: "text-right", children: [_jsxs("p", { className: "text-3xl font-bold text-civic-400", children: [wallet?.balance.toFixed(2), " CIVIC"] }), _jsx("p", { className: "text-dark-300 text-sm", children: "Available" }), _jsxs("div", { className: "mt-2 text-xs text-dark-300", children: ["Community Treasury: ", _jsxs("span", { className: "font-mono text-yellow-400", children: [(treasuryBalance || 0).toFixed(2), " CIVIC"] })] })] })] }) }), _jsx("h2", { className: "text-2xl font-bold text-white mb-6", children: "Explore The Foyer" }), _jsx("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12", children: zones.map((zone, index) => (_jsx(motion.button, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { delay: index * 0.05 }, onClick: () => setSelectedZone(zone.id), whileHover: { scale: 1.05 }, whileTap: { scale: 0.95 }, className: "text-left group", children: _jsxs("div", { className: "bg-dark-800 border border-dark-700 hover:border-civic-500/50 rounded-xl p-6 h-full transition relative overflow-hidden", children: [_jsx("div", { className: "absolute inset-0 bg-gradient-to-br from-civic-500/5 to-civic-600/5 group-hover:from-civic-500/10 group-hover:to-civic-600/10 transition" }), _jsxs("div", { className: "relative z-10", children: [_jsx("div", { className: "text-4xl mb-4", children: zone.icon }), _jsx("h3", { className: "text-xl font-bold text-white mb-1", children: zone.name }), _jsx("p", { className: "text-dark-300 text-sm", children: zone.description })] })] }) }, zone.id))) }), selectedZone && (_jsx(motion.div, { initial: { opacity: 0 }, animate: { opacity: 1 }, exit: { opacity: 0 }, className: "fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4", onClick: () => setSelectedZone(null), children: _jsx(motion.div, { initial: { scale: 0.9, opacity: 0 }, animate: { scale: 1, opacity: 1 }, onClick: (e) => e.stopPropagation(), className: "bg-dark-800 border border-dark-700 rounded-xl p-8 max-w-2xl w-full", children: (() => {
                                const zone = zones.find((z) => z.id === selectedZone);
                                if (!zone)
                                    return null;
                                return (_jsxs("div", { children: [_jsxs("div", { className: "flex items-start justify-between mb-6", children: [_jsxs("div", { className: "flex items-center gap-4", children: [_jsx("span", { className: "text-5xl", children: zone.icon }), _jsxs("div", { children: [_jsx("h2", { className: "text-3xl font-bold text-white", children: zone.name }), _jsx("p", { className: "text-dark-300", children: zone.description })] })] }), _jsx("button", { onClick: () => setSelectedZone(null), className: "text-dark-400 hover:text-white transition text-2xl", children: "\u2715" })] }), _jsx("p", { className: "text-dark-200 mb-6 leading-relaxed", children: zone.details }), zone.id === 'commerce' && (_jsxs("div", { className: "bg-dark-700 rounded-lg p-4 mb-6 space-y-3", children: [_jsxs("p", { className: "text-white font-semibold flex items-center gap-2", children: [_jsx(ShoppingBag, { className: "w-5 h-5 text-civic-400" }), " Marketplace"] }), _jsxs("div", { className: "mb-3 text-sm text-dark-300", children: ["Community Treasury: ", _jsxs("span", { className: "font-mono text-yellow-400", children: [(treasuryBalance || 0).toFixed(2), " CIVIC"] }), " (1% microtax applied on purchases)"] }), _jsx("div", { className: "space-y-3", children: marketplaceItems.map((it) => (_jsxs("div", { className: "flex items-center justify-between bg-dark-600 p-3 rounded", children: [_jsxs("div", { children: [_jsx("div", { className: "text-white font-semibold", children: it.name }), _jsx("div", { className: "text-dark-300 text-xs", children: it.description }), _jsxs("div", { className: "text-dark-400 text-xs mt-1", children: ["Seller: ", it.seller] })] }), _jsxs("div", { className: "text-right", children: [_jsxs("div", { className: "text-yellow-400 font-mono", children: [it.price.toFixed(2), " CIVIC"] }), _jsx("button", { onClick: async () => {
                                                                            try {
                                                                                await marketplaceBuy(it.seller, it.price);
                                                                                setChatMessages((m) => [{ author: 'MARKET', text: `You bought ${it.name} for ${it.price.toFixed(2)} CIVIC (1% microtax applied)`, color: '#00ffcc' }, ...m]);
                                                                            }
                                                                            catch (err) {
                                                                                setChatMessages((m) => [{ author: 'MARKET', text: `Purchase failed: ${err}`, color: '#ff4444' }, ...m]);
                                                                            }
                                                                        }, className: "mt-2 bg-civic-500 hover:bg-civic-600 text-white px-3 py-1 rounded text-sm", children: "Buy" })] })] }, it.id))) })] })), zone.id === 'schoolhouse' && (_jsxs("div", { className: "bg-dark-700 rounded-lg p-4 mb-6 space-y-3", children: [_jsxs("p", { className: "text-white font-semibold flex items-center gap-2", children: [_jsx(BookOpen, { className: "w-5 h-5 text-green-400" }), " Featured Courses"] }), _jsxs("div", { className: "space-y-2 text-sm", children: [_jsx("div", { className: "bg-dark-600 p-2 rounded text-dark-200", children: "\u2022 Governance 101 (3 weeks)" }), _jsx("div", { className: "bg-dark-600 p-2 rounded text-dark-200", children: "\u2022 Local Policy Making (4 weeks)" }), _jsx("div", { className: "bg-dark-600 p-2 rounded text-dark-200", children: "\u2022 Civic Participation (2 weeks)" })] })] })), zone.id === 'newsstand' && (_jsxs("div", { className: "bg-dark-700 rounded-lg p-4 mb-6 space-y-3", children: [_jsxs("p", { className: "text-white font-semibold flex items-center gap-2", children: [_jsx(Newspaper, { className: "w-5 h-5 text-blue-400" }), " Trending Now"] }), _jsxs("div", { className: "space-y-2 text-sm", children: [_jsx("div", { className: "bg-dark-600 p-2 rounded text-dark-200", children: "\u2191 Environmental Initiative Approved" }), _jsx("div", { className: "bg-dark-600 p-2 rounded text-dark-200", children: "\u2191 New Park Opening Downtown" }), _jsx("div", { className: "bg-dark-600 p-2 rounded text-dark-200", children: "\u2191 Community Survey Results In" })] })] })), zone.id === 'social' && (_jsxs("div", { className: "bg-dark-700 rounded-lg p-4 mb-6 space-y-3", children: [_jsxs("p", { className: "text-white font-semibold flex items-center gap-2", children: [_jsx(Users, { className: "w-5 h-5 text-orange-400" }), " Active Groups"] }), _jsxs("div", { className: "space-y-2 text-sm", children: [_jsx("div", { className: "bg-dark-600 p-2 rounded text-dark-200", children: "Park Cleanup Initiative (156 members)" }), _jsx("div", { className: "bg-dark-600 p-2 rounded text-dark-200", children: "Neighborhood Watch (342 members)" }), _jsx("div", { className: "bg-dark-600 p-2 rounded text-dark-200", children: "Civic Book Club (87 members)" })] })] })), zone.id === 'universe' && (_jsxs("div", { className: "bg-dark-700 rounded-lg p-4 mb-6 space-y-3", children: [_jsxs("p", { className: "text-white font-semibold flex items-center gap-2", children: [_jsx(MapPin, { className: "w-5 h-5 text-purple-400" }), " Available Worlds"] }), _jsxs("div", { className: "space-y-2 text-sm", children: [_jsx("div", { className: "bg-dark-600 p-2 rounded text-dark-200", children: "The Civic Arena (PvP Missions)" }), _jsx("div", { className: "bg-dark-600 p-2 rounded text-dark-200", children: "Education Valley (Learning Quests)" }), _jsx("div", { className: "bg-dark-600 p-2 rounded text-dark-200", children: "Commerce District (Trading Hub)" })] })] })), zone.id === 'avatar' && (_jsxs("div", { className: "bg-dark-700 rounded-lg p-4 mb-6 space-y-3", children: [_jsxs("p", { className: "text-white font-semibold flex items-center gap-2", children: [_jsx(Award, { className: "w-5 h-5 text-yellow-400" }), " Your Progress"] }), _jsxs("div", { className: "space-y-2 text-sm", children: [_jsx("div", { className: "bg-dark-600 p-2 rounded text-dark-200", children: "Wearables Owned: 8" }), _jsx("div", { className: "bg-dark-600 p-2 rounded text-dark-200", children: "Badges Earned: 5" }), _jsxs("div", { className: "bg-dark-600 p-2 rounded text-dark-200", children: ["Reputation Score: ", user?.trustScore] })] })] })), _jsx("button", { onClick: () => setSelectedZone(null), className: "w-full bg-civic-500 hover:bg-civic-600 text-white font-bold py-3 px-4 rounded-lg transition", children: "Close" })] }));
                            })() }) })), _jsxs(motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { delay: 0.5 }, className: "bg-dark-800 border border-dark-700 rounded-xl p-8 mb-12", children: [_jsxs("h2", { className: "text-2xl font-bold text-white mb-6 flex items-center gap-3", children: [_jsx("span", { children: "\uD83E\uDDE0" }), " Craig \u2014 Your Civic AI Guide"] }), _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [_jsxs("div", { children: [_jsx("p", { className: "text-dark-200 mb-4", children: "Craig is your always-on AI assistant, suggesting nearby missions, faction goals, educators, and portals." }), _jsxs("ul", { className: "space-y-2 text-dark-300 text-sm", children: [_jsx("li", { children: "\u2713 Interprets DAO proposals and status" }), _jsx("li", { children: "\u2713 Routes you to relevant opportunities" }), _jsx("li", { children: "\u2713 Built with protocol-aligned ethics" }), _jsx("li", { children: "\u2713 Passes #FryboyTest certification" })] })] }), _jsxs("div", { className: "bg-dark-700 p-4 rounded-lg border border-dark-600", children: [_jsx("p", { className: "text-civic-400 font-semibold mb-2", children: "Coming Soon:" }), _jsx("p", { className: "text-dark-300 text-sm", children: "Voice chat integration, context-aware guidance, real-time mission routing, and full Unreal Engine 5 implementation." })] })] })] }), _jsxs(motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { delay: 0.6 }, className: "bg-dark-800 border border-dark-700 rounded-xl p-8", children: [_jsx("h2", { className: "text-2xl font-bold text-white mb-6", children: "\u2699\uFE0F The Foyer Tech Stack" }), _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6 text-sm", children: [_jsxs("div", { children: [_jsx("p", { className: "text-civic-400 font-semibold mb-2", children: "Core Infrastructure" }), _jsxs("ul", { className: "space-y-1 text-dark-300", children: [_jsx("li", { children: "\u2022 Game Engine: Unreal Engine 5 (Nanite, Lumen)" }), _jsx("li", { children: "\u2022 UI: React.js HUD + UE5 native interface" }), _jsx("li", { children: "\u2022 Backend: Node.js, FastAPI, Ceramic" }), _jsx("li", { children: "\u2022 Identity: Soulbound NFTs, DIDs" })] })] }), _jsxs("div", { children: [_jsx("p", { className: "text-civic-400 font-semibold mb-2", children: "Blockchain & Connectivity" }), _jsxs("ul", { className: "space-y-1 text-dark-300", children: [_jsx("li", { children: "\u2022 Privacy Mining: Monero integration" }), _jsx("li", { children: "\u2022 Speed Layer: Kaspa blockchain" }), _jsx("li", { children: "\u2022 NFTs: Ethereum-based wearables" }), _jsx("li", { children: "\u2022 Offline: LoRaWAN, Bluetooth Mesh" })] })] })] })] })] })] }));
}
